<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.mtl.notice.NoticeMapper">

    <!-- 공지사항 목록 조회 (페이징 처리) -->
    <select id="selectNoticesWithPaging" parameterType="map" >
        SELECT notice_idx, title, contents, target, created_date, update_date
        FROM NOTICE
        WHERE status = 'Y'
        ORDER BY created_date DESC
        LIMIT #{limit} OFFSET #{offset}
    </select>

    <!-- 공지사항 작성 -->
    <insert id="insertNotice" parameterType="map">
        INSERT INTO NOTICE (title, contents, target, created_date, status)
        VALUES (#{title}, #{contents}, #{target}, NOW(), 'Y')
    </insert>

    <!-- 공지사항 상세 조회 -->
    <select id="selectNotice" parameterType="int" >
        SELECT notice_idx, title, contents, target, created_date, update_date
        FROM NOTICE
        WHERE notice_idx = #{notice_idx}
    </select>

    <!-- 공지사항 수정 -->
    <update id="updateNotice" parameterType="map">
        UPDATE NOTICE
        SET
            contents = #{contents},
            update_date = NOW()
        WHERE
            notice_idx = #{notice_idx}
            AND status = 'Y'
    </update>

    <!-- 공지사항 삭제 -->
    <delete id="deleteNotice" parameterType="map">
        DELETE FROM NOTICE
        WHERE
            notice_idx = #{notice_idx}
            AND status = 'Y'
    </delete>

</mapper>