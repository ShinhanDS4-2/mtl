<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.mtl.user.question.QuestionMapper">
	
	<!-- 문의 등록 -->
	<insert id="registQuestion" parameterType="HashMap">
		INSERT INTO PARTNER_QUESTION (
			  user_idx
			, partner_idx
			, title
			, content
		) VALUES (
			  #{user_idx}
			, #{partner_idx}
			, #{title}
			, #{content}
		)
	</insert>
		<!-- 내가 쓴 후기 리스트 -->
	<select id="getQuestionList" parameterType="HashMap">
		SELECT
			  user_idx
			, content
			, answer
			, (SELECT name FROM ADMIN WHERE idx = admin_idx) AS name
			, create_date 
			, answer_date 
		FROM
			QUESTION
		WHERE 
			user_idx = #{user_idx}
	</select>
	
	<!-- 내가 쓴 후기 개수 -->
	<select id="getQuestionCnt" parameterType="HashMap">
		SELECT
			COUNT(*)
		FROM
			QUESTION
		WHERE 
			user_idx = #{user_idx}
	</select>
	
	<!-- 
	<insert id="registQuestion" parameterType="HashMap">
        INSERT INTO QUESTION (user_idx, admin_idx, title, content)
        VALUES (#{user_idx}, #{admin_idx}, #{title}, #{content})
    </insert>

    <select id="getQuestionList" parameterType="HashMap">
        SELECT user_idx, content, answer, create_date, answer_yn
        FROM QUESTION
        WHERE user_idx = #{user_idx}
        ORDER BY create_date DESC
        LIMIT #{limit} OFFSET #{offset}
    </select>

    <select id="getQuestionDetail" parameterType="HashMap">
        SELECT * FROM QUESTION WHERE id = #{id}
    </select>

    <select id="getQuestionCnt" parameterType="HashMap">
        SELECT COUNT(*) FROM QUESTION WHERE user_idx = #{user_idx}
    </select>
	 -->
</mapper>